(function($){GALAXY.load(function(){window.mixController=function(){var coverWatch=$(".default-watch"),strap46Slider=$("#slider0"),strap42Slider=$("#slider1"),appSlider=$("#slider2"),appColors=$(".color_sel .color"),defaultTab=$(".watch-tab .silver a"),selectInfo=$(".m_feature-mix-match .model-info");var state={selectItem:{strap:$(".strap-wrap .default-data1").attr("src"),strapName:defaultTab.data("strap-name"),strapAlt:$(".strap-wrap .default-data1").attr("alt"),app:$(".watch-face-wrap .default-data1").attr("src"),appName:defaultTab.data("app-name"),appIdx:defaultTab.data("app-idx"),appAlt:$(".watch-face-wrap .default-data1").attr("alt"),watch:$(".default-watch .bezel .default-data1").attr("src"),watchName:defaultTab.data("watch-name"),watchType:46},currentStep:"strap",currentWatch:1,background:"#eeeeee",appLoadFlag:false,isMotion:false};function changeInfo(){selectInfo.find("strong").text(state.selectItem.strapName);selectInfo.find("p").text(state.selectItem.appName);var watchName=state.currentWatch===1?"46mm Silver":state.currentWatch===0?"42mm Midnight Black":"42mm Rose Gold",stepName=state.currentStep==="strap"?"Strap":"Watchface";$(".mix-match-wrap .select-info").text(watchName+" and "+stepName)}function changeWatch(flag){coverWatch.find(".bezel figure").css({"z-index":"",display:""}).attr("aria-hidden","true");coverWatch.find(".bezel figure").eq(state.currentWatch).stop().css("z-index",11).attr("aria-hidden","").animate({opacity:1},flag?100:0,function(){$(this).siblings().css("opacity",0)});coverWatch.find(".strap img").attr({src:state.selectItem.strap,alt:state.selectItem.strapAlt});coverWatch.find(".face img").attr({src:state.selectItem.app,alt:state.selectItem.appAlt}).stop().attr("style","").css("opacity",.8).animate({opacity:1},flag?200:0,function(){coverWatch.find(".face img").attr("style","")});changeInfo()}function resetStrap(type,current,callback){if(type===46){var centerInx=strap46Slider.find(".center .slide").data("slide-index");if(centerInx!==1)strap46Slider.find(".slick_wrap").trigger("to.owl.carousel",[1,0]);setTimeout(function(){distantSet(strap46Slider);callback()},10)}else if(type===42){var centerInx=strap42Slider.find(".center .slide").data("slide-index");if(current===0){if(centerInx!==0)strap42Slider.find(".slick_wrap").trigger("to.owl.carousel",[0,0])}else if(current===2){if(centerInx!==6)strap42Slider.find(".slick_wrap").trigger("to.owl.carousel",[4,0])}setTimeout(function(){distantSet(strap42Slider);callback()},10)}}function changeStrap(){if(state.selectItem.watchType===46){strap46Slider.css({visibility:"visible",opacity:""});strap42Slider.css({visibility:"hidden",opacity:0})}else if(state.selectItem.watchType===42){strap46Slider.css({visibility:"hidden",opacity:0});strap42Slider.css({visibility:"visible",opacity:""})}}function changeApp(){var centerInx=appSlider.find(".center .slide").data("slide-index");if(centerInx!==state.selectItem.appIdx)appSlider.find(".slick_wrap").trigger("to.owl.carousel",[state.selectItem.appIdx,0]);setTimeout(function(){distantSet(appSlider)},10)}function changeStep(){if(state.currentStep==="strap"){appSlider.css({visibility:"hidden",opacity:0});setTimeout(function(){coverWatch.find(".face").show();coverWatch.find(".strap").hide()},100);changeStrap()}else if(state.currentStep==="app"){strap46Slider.css({visibility:"hidden",opacity:0});strap42Slider.css({visibility:"hidden",opacity:0});setTimeout(function(){coverWatch.find(".strap").show();coverWatch.find(".face").hide()},100)}}function changeBg(){$(".mix-match-wrap").css("background",state.background)}function resetAppColor(){appSlider.find(".slide").each(function(){$(this).find("figure").hide().eq(0).show()});appColors.hide().each(function(){$(this).find("a").removeClass("on").eq(0).addClass("on")})}function makeAppColor(){var colors=$(".color_sel .color");appSlider.find(".slide").each(function(){var url=$(this).find("img").attr("src").split("01.png")[0],name=$(this).find("img").attr("alt"),dom=[],item=colors.eq($(this).data("slide-index")).find("a");$(this).find("img").attr("alt",name+" "+item.eq(0).text());for(var i=1;i<item.length+1;i++){item.eq(i-1).attr("data-select-item",url+"0"+i+".png"+(___IS_GALAXY?"":"?$ORIGIN_PNG$"));if(i!==1)dom.push('<figure  style="display:'+(i===1?"block":"none")+';"><img alt="'+name+" "+item.eq(i-1).text()+'" src="'+url+"0"+i+".png"+(___IS_GALAXY?"":"?$ORIGIN_PNG$")+'"></figure>')}if(dom.length!==0)$(this).find(">a").append(dom.join(""))})}return{watchChange:function(data){state.isMotion=true;var strapFlag=state.selectItem.watchType===(data.idx===1?46:42),stepFlag=state.currentStep==="strap",delay=strapFlag?stepFlag?100:800:800;state.currentWatch=data.idx;state.currentStep="strap";state.selectItem.strap=data.strap;state.selectItem.strapAlt=data.strapAlt;state.selectItem.strapName=data.strapName;state.selectItem.app=data.app;state.selectItem.appName=data.appName;state.selectItem.appAlt=data.appAlt;state.selectItem.watch=data.watch;state.selectItem.watchName=data.watchName;state.selectItem.watchType=data.idx===1?46:42;state.background=data.idx===2?"#fdf9f8":"#eeeeee";state.selectItem.appIdx=data.appIdx;if(stepFlag){if(strapFlag){if(state.selectItem.watchType===42){if(state.currentWatch===0){strap42Slider.find(".slick_wrap").trigger("to.owl.carousel",[0,100])}else if(state.currentWatch===2){strap42Slider.find(".slick_wrap").trigger("to.owl.carousel",[4,100])}}}else{if(state.selectItem.watchType===42){strap46Slider.addClass("out")}else if(state.selectItem.watchType===46){strap42Slider.addClass("out")}}}else{appSlider.addClass("out");$(".ui-tab a").removeClass("on").eq(0).addClass("on")}if(!stepFlag||!strapFlag){resetStrap(state.selectItem.watchType,state.currentWatch,function(){$(".default-watch, .center .slide figure").stop().animate({opacity:0},delay)})}if(!$("html").hasClass("transition")||$("html").hasClass("s1"))delay=50;setTimeout(function(){resetAppColor();if(state.selectItem.watchType===42){appSlider.addClass("tp2");coverWatch.find(".face").addClass("tp2");strap42Slider.removeClass("out")}else if(state.selectItem.watchType===46){appSlider.removeClass("tp2");coverWatch.find(".face").removeClass("tp2");strap46Slider.removeClass("out")}changeBg();changeStep();changeWatch(strapFlag);chageTabIndex();$(".default-watch, .center .slide figure").stop().animate({opacity:1},400,function(){});setTimeout(function(){chageTabIndex();state.isMotion=false},delay)},delay)},stepChange:function(type){state.isMotion=true;state.currentStep=type;changeWatch();coverWatch.find(".strap").show();coverWatch.find(".face").show();if(type==="app"){if(!state.appLoadFlag){state.appLoadFlag=true;makeAppColor()}strap46Slider.addClass("out");strap42Slider.addClass("out");changeApp();appColors.eq(state.selectItem.appIdx).show()}else{appSlider.addClass("out");appColors.hide()}var delay=!$("html").hasClass("transition")||$("html").hasClass("s1")?100:800;setTimeout(function(){if(type==="app"){appSlider.css({visibility:"visible",opacity:""});appSlider.removeClass("out")}else{strap46Slider.removeClass("out");strap42Slider.removeClass("out")}changeStep();chageTabIndex();setTimeout(function(){chageTabIndex();state.isMotion=false},delay)},delay)},appChange:function(item){if(state.currentStep==="app"){state.selectItem.appIdx=item.data("slide-index");state.selectItem.appName=item.data("item-name");appColors.hide();appColors.eq(state.selectItem.appIdx).show();var selectApp=appColors.eq(state.selectItem.appIdx).find("a.on");state.selectItem.app=selectApp[0]?appColors.eq(state.selectItem.appIdx).find("a.on").data("select-item"):item.find("img").attr("src");state.selectItem.appAlt=item.find("img").attr("alt");changeWatch();changeInfo()}},appColorChange:function(url){state.selectItem.app=url;changeWatch()},strapChange:function(item){state.selectItem.strap=item.find("img").attr("src");state.selectItem.strapAlt=item.find("img").attr("alt");state.selectItem.strapName=item.data("item-name");state.background=item.data("color-code");changeWatch();changeBg();changeInfo()},getVrData:function(){return{strap:state.selectItem.strap,strapName:state.selectItem.strapName,app:state.selectItem.app,appName:state.selectItem.appName,watch:state.selectItem.watch,watchName:state.selectItem.watchName,watchType:state.selectItem.watchType}},getMotion:function(){return state.isMotion},getState:function(){return state}}}();$(".mix-content").on("mouseenter mouseleave",function(e){var t=$(this).find("nav");if(e.type==="mouseenter"){t.fadeIn()}else{t.fadeOut()}});$(".ui-tab a:last, .slide a").on("keydown",function(e){if(e.type==="keydown"&&e.keyCode===9)$(".mix-content nav").show()});if($("html").hasClass("ie8"))$(".bezel figure").css("opacity","");$(".slick_wrap").each(function(){$(this).find(".slide").each(function(idx){$(this).attr("data-slide-index",idx)})});$(".default-watch .bezel figure").attr("aria-hidden","true").eq(1).attr("aria-hidden","");$(".watch-tab li a").on("click",function(){if($(this).parent().hasClass("on")||mixController.getMotion())return false;$(".watch-tab li").removeClass("on");$(this).parent().addClass("on");var dClass=".default-data"+$(this).parent().index();mixController.watchChange({idx:$(this).parent().index(),watch:$(".default-watch .bezel "+dClass).attr("src"),watchName:$(this).data("watch-name"),strap:$(".strap-wrap "+dClass).attr("src"),strapAlt:$(".strap-wrap "+dClass).attr("alt"),strapName:$(this).data("strap-name"),app:$(".watch-face-wrap "+dClass).attr("src"),appAlt:$(".watch-face-wrap "+dClass).attr("alt"),appName:$(this).data("app-name"),appIdx:$(this).data("app-idx")});return false});var item0=$("#slider1 .slick_wrap");var item1=$("#slider0 .slick_wrap");var item2=$("#slider2 .slick_wrap");function omni(tag){if(___IS_GALAXY&&GALAXY){GALAXY.omniture(tag)}}function chageTabIndex(){$(".slick_wrap .owl-item").not(".active").find(".slide a").attr("tabIndex","-1");$(".slick_wrap .active .slide a").attr("tabIndex","")}item0.on("translated.owl.carousel initialized.owl.carousel resized.owl.carousel",function(e){if(item0.css("visibility")!=="hidden"){if(e.type==="translated"){var cItem=$(this).find(".slide").eq(e.item.index);mixController.strapChange(cItem);omni("galaxy-watch-2018:highlights:choose:select:42"+($(".watch-tab li.on").index()===0?"black":"gold")+"^straps^"+cItem.data("item-name").toLowerCase().replace(/ /g,"-"));chageTabIndex()}distantSet(item0)}if(e.type==="initialized"){setTimeout(function(){$("#slider0").find("nav .owl-prev").attr({title:"Click to see previous strap.",href:"#","data-omni-type":"microsite_pcontentinter","data-omni":"rolling:left arrow"});$("#slider0").find("nav .owl-next").attr({title:"Click to see next strap.",href:"#","data-omni-type":"microsite_pcontentinter","data-omni":"rolling:right arrow"});chageTabIndex()},100)}});item1.on("translated.owl.carousel initialized.owl.carousel resized.owl.carousel",function(e){if(item1.css("visibility")!=="hidden"){if(e.type==="translated"){var cItem=$(this).find(".slide").eq(e.item.index);mixController.strapChange(cItem);omni("galaxy-watch-2018:highlights:choose:select:46silver^straps^"+cItem.data("item-name").toLowerCase().replace(/ /g,"-"));chageTabIndex()}distantSet(item1)}if(e.type==="initialized"){setTimeout(function(){$("#slider1").find("nav .owl-prev").attr({title:"Click to see previous strap.",href:"#","data-omni-type":"microsite_pcontentinter","data-omni":"rolling:left arrow"});$("#slider1").find("nav .owl-next").attr({title:"Click to see next strap.",href:"#","data-omni-type":"microsite_pcontentinter","data-omni":"rolling:right arrow"});chageTabIndex()},100)}});item2.on("translated.owl.carousel initialized.owl.carousel resized.owl.carousel",function(e){if(item2.css("visibility")!=="hidden"){if(e.type==="translated"){var cItem=$(this).find(".slide").eq(e.item.index),idx=$(".watch-tab li.on").index();mixController.appChange(cItem);omni("galaxy-watch-2018:highlights:choose:select:"+(idx===0?"42black":idx===1?"46silver":"42gold")+"^faces^"+cItem.data("item-name").toLowerCase().replace(/ /g,"-"));chageTabIndex()}distantSet(item2)}if(e.type==="initialized"){setTimeout(function(){$("#slider2").find("nav .owl-prev").attr({title:"Click to see previous watchface.",href:"#","data-omni-type":"microsite_pcontentinter","data-omni":"rolling:left arrow"});$("#slider2").find("nav .owl-next").attr({title:"Click to see next watchface.",href:"#","data-omni-type":"microsite_pcontentinter","data-omni":"rolling:right arrow"});chageTabIndex()},100)}});var isDrag=!$("html").hasClass("nopointerevents");item0.owlCarousel({loop:true,center:true,items:5,dots:false,navElement:"a",mouseDrag:isDrag,navContainer:"#slider1 nav",responsive:{0:{items:1},768:{items:3},1024:{items:5}}});item1.owlCarousel({center:true,items:3,dots:false,navElement:"a",mouseDrag:isDrag,navContainer:"#slider0 nav",startPosition:1,responsive:{0:{items:1,loop:true},768:{items:3,loop:false}}});item2.owlCarousel({loop:true,center:true,items:5,dots:false,startPosition:7,navElement:"a",mouseDrag:isDrag,navContainer:"#slider2 nav",responsive:{0:{items:1},768:{items:3},1024:{items:5}}});var isMotion=false;function distantSet(target){var flag="left";target.find(".owl-item").removeClass("left right delay1 delay2").each(function(){if($(this).hasClass("center")){flag="right"}else{$(this).addClass(flag)}});var centerIndx=target.find(".center").index();if(centerIndx-1>-1)target.find(".owl-item").eq(centerIndx-1).addClass("delay1");if(centerIndx-2>-1)target.find(".owl-item").eq(centerIndx-2).addClass("delay2");if(centerIndx+1<=target.find(".owl-item").length-1)target.find(".owl-item").eq(centerIndx+1).addClass("delay1");if(centerIndx+2<=target.find(".owl-item").length-1)target.find(".owl-item").eq(centerIndx+2).addClass("delay2")}$(".ui-tab a").on("click",function(e){if($(this).hasClass("on")||isMotion||mixController.getMotion())return false;$(".ui-tab a").removeClass("on");$(this).addClass("on");var idx=$(".watch-tab li.on").index(),omniWatch=idx===0?"42black":idx===1?"46silver":"42gold";if($(this).hasClass("strap-btn")){mixController.stepChange("strap");omni("galaxy-watch-2018:highlights:choose:select:"+omniWatch+"^straps")}else{mixController.stepChange("app");omni("galaxy-watch-2018:highlights:choose:select:"+omniWatch+"^faces")}return false});$(document).on("click",".slide a",function(e){if(isMotion||mixController.getMotion())return false;isMotion=true;$(e.currentTarget).parents(".slick_wrap").trigger("to.owl.carousel",[$(this).parent().data("slide-index"),200]);setTimeout(function(){isMotion=false},500);return false});$(document).on("click",".color_sel .color a",function(){if($(this).hasClass("on")||isMotion||mixController.getMotion())return false;isMotion=true;var target=item2.find("[data-slide-index="+$(this).parent().index()+"]"),idx=$(this).index();target.each(function(){var t=$(this);t.find("figure").eq(idx).css("z-index",1).stop().fadeIn(200,function(){t.find("figure").css("z-index","");$(this).siblings().not("a").hide();isMotion=false})});$(this).parent().find("a").removeClass("on");$(this).addClass("on");mixController.appColorChange($(this).data("select-item"));var idx=$(".watch-tab li.on").index(),omniWatch=idx===0?"42black":idx===1?"46silver":"42gold";omni("galaxy-watch-2018:highlights:choose:color:"+omniWatch+"^faces^"+mixController.getState().selectItem.appName.toLowerCase().replace(/ /g,"-")+"^"+$(this).text().toLowerCase());return false})})})(jQuery);